{# The default project templates assumes a _base.html template to be extended. #}
{% extends '_base.html' %}

{% block meta %}
{{ super() }}
{% endblock %}

{% block css %}
{{ super() }}
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" media="all" />
    <link href="{{ static_url('metropolitan-water-district-rental-properties', '/css/project-styles.css') }}" rel="stylesheet" type="text/css" media="all" />
{% endblock %}

{% block data_details_content %}
    <div id="content-article">
        <h4 class="kicker">{{ project_kicker|safe }}</h4>
        <h1>{{ project_headline }}</h1>

        <div id="content-article-metadata">
            <p>
            {% if project_credits %}
                <span class="credits">{{ project_credits|safe }}</span> |
            {% else %}
            {% endif %}
            <span class="pubdate">{{ project_pubdate }}</span>
            </p>
        </div>

        {% if project_article_text %}
            <div id="content-article-text">
                {{ project_article_text|safe }}
            </div>
        {% else %}
        {% endif %}

        {% if project_readmore_link %}
            <div id="content-article-buttons">
                <a class="btn btn-info" href="{{ project_readmore_link }}" target="_blank">Read More</a>
            </div>
        {% else %}
        {% endif %}

        {% if project_data_instructions %}
            <div id="content-explainer">
                <p><span class="data-instructions">{{ project_data_instructions|safe }}</span></p>
            </div>
        {% else %}
        {% endif %}
    </div>
{% endblock %}

{% block data_visuals_content %}
    <div id="content-background"></div>
    <div id="content-display"></div>

    <div class="row-fluid">
        <div class="span3">
            <div id="filters">
                <h4 class="alert alert-info lead" id="result_count"></h4>
                <div class="well">
                    <h5>Enter your address<br />or use <a id="find_me" href="javascript:void(0)">your location</a></h5>
                    <input class="input-block-level" id="search_address" type="text" placeholder="" />
                    <label>
                        within
                        <select class="input-small" id="search_radius">
                            <option value="3220">2 miles</option>
                            <option value="8047">5 miles</option>
                            <option value="16093">10 miles</option>
                            <option value="24140">15 miles</option>
                            <option value="32186">20 miles</option>
                            <option value="80467">50 miles</option>
                            <option value="160934">100 miles</option>
                        </select>
                    </label>
                    <input class="btn btn-success" id="search" type="button" value="Search" />
                    <button class="btn btn-danger" id="reset">Reset</button>
                </div>


                <div class="well">

                    <!-- begin filter for status -->

                    <!--

                    Carryover: "Although the lease term has expired, the lessee remains on the property, and Met still continues to collect its lease/rent amount."
                    Rent 1: "Main rent"
                    Frequency 1: "How often it is paid."
                    Rents 2 and 3 are anything “extra” like a yearly access road fee, yearly vault charges, power charges, parking charges, etc. Those charges are explained in the Frequency column. The terms could change between the start date and end date, if an amendment is executed.  The rent shown, however, is the current rent.

                    <div class="slider-filter">
                        <h5>FHWA Status</h5>
                        <ul class="inputs-list unstyled">
                            <li><label class="radio inline"><input type="radio" name="status" id="rbTypeAll" /><span class="filter-box"></span> All Bridges</label></li>
                            <li><label class="radio inline"><input type="radio" name="status" id="rbTypeSd" /><span class="filter-box filter-red"></span> Structurally Deficient</label></li>
                            <li><label class="radio inline"><input type="radio" name="status" id="rbTypeFo" /><span class="filter-box filter-yellow"></span> Functionally Obsolete</label></li>
                            <li><label class="radio inline"><input type="radio" name="status" id="rbTypeNd" /><span class="filter-box filter-green"></span> Not Deficient</label></li>
                            <li><label class="checkbox inline"><input type="checkbox" name="fracture_critical" id="cbTypeFc" /><span class="filter-box"></span> Fracture Critical</label></li>
                        </ul>
                    </div>
                    -->

                    <!-- begin filter for calif bhi rating -->
                    <!--
                    <div class="slider-filter">
                        <h5> Caltrans Bridge Health Index:<br /><small><span id="bhi-selected-start">0</span> to <span id="bhi-selected-end">100</span></small></h5>
                        <div id="bhi-slider"></div>
                        <p class="pull-left" id="minBhi">0</p>
                        <p class="pull-right" id="maxBhi">100</p>
                    </div>
                    -->

                    <!-- begin filter for year built -->
                    <!--
                    <div class="slider-filter">
                        <h5>Year Built: <small><span id="startDate"></span> to <span id="endDate"></span></small></h5>
                        <div id="date-range"></div>
                        <p class="pull-left" id="minDate"></p>
                        <p class="pull-right" id="maxDate"></p>
                    </div>
                    -->

                    <!-- begin filter for average daily traffic rating -->
                    <!--
                    <div class="slider-filter">
                        <h5>Average Daily Traffic: <small><span id="adt-selected-start">0</span> to <span id="adt-selected-end">100000</span></small></h5>
                        <div id="adt-slider"></div>
                        <p class="pull-left" id="minAdt">0</p>
                        <p class="pull-right" id="maxAdt">100000</p>
                    </div>
                    -->

                    <!-- begin filter for national bridge rating -->
                    <!--
                    <div class="slider-filter">
                        <h4>Natl BHI: <span id="ntl-selected-start">0</span> to <span id="ntl-selected-end">100</span></h4>
                        <div id="ntl-slider"></div>
                        <p class="pull-left" id="minNtl">0</p>
                        <p class="pull-right" id="maxNtl">100</p>
                    </div>
                    -->

                    <!-- begin filter for bridge length -->
                    <!--
                    <div class="slider-filter">
                        <h4>Bridge Length: <span id="length-selected-start">0</span> to <span id="length-selected-end">2000</span></h4>
                        <div id="length-slider"></div>
                        <p class="pull-left" id="minLength">0</p>
                        <p class="pull-right" id="maxLength">2000</p>
                    </div>
                    -->

                </div>
            </div>
        </div>
        <div class="span9">
            {% if project_data_instructions %}
                <div id="content-explainer">
                    <p><span class="data-instructions">{{ project_data_instructions|safe }}</span></p>
                </div>
            {% else %}
            {% endif %}
            <div id="content-map-canvas"></div>
        </div>
    </div>
{% endblock %}

{% block data_footer_content %}
    {% if project_embed == 'True' %}
        <div id="embed-this">
            <p class="hidden-tablet hidden-phone"><span class="btn btn-warning" style="cursor:pointer;" onclick="embedBox()">Embed this map</p>
        </div>
    {% else %}
    {% endif %}

    {% if project_sources %}
        <div id="sources">
            <p class="normal-display"><strong>Source(s): </strong>{{ project_sources|safe }}</p>
        </div>
    {% else %}
    {% endif %}

    {% if project_open_source %}
        <div id="open-source">
            <p class="small-display">{{ project_open_source|safe }}</p>
        </div>
    {% else %}
    {% endif %}

{% endblock %}

{% block data_comments %}
    {% if project_comments == 'True' %}
        <div class="row-fluid">
            <div class="span12">
            <div id="disqus_thread"></div>
                <script type="text/javascript">
                    var disqus_shortname = 'kpcc-projects';
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </div>
    {% else %}
    {% endif %}
{% endblock %}

{% block kpcc_scripts %}
{{ super() }}
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
    <script src="http://maps.google.com/maps/api/js?key=AIzaSyAtS1OYyuRY0inb23BK0nuGId3FiOC6Rb8&sensor=true&amp;libraries=places"></script>
    <script src="http://projects.scpr.org/static/static-files/scripts/underscore-min.js"></script>
    <script src="http://projects.scpr.org/static/static-files/scripts/jquery.address.min-1.4.js"></script>
    <script src="http://projects.scpr.org/static/static-files/scripts/jquery.geocomplete.min-1.4.js"></script>
    <script src="http://projects.scpr.org/static/static-files/bootstrap-v222/bootstrap.min.js"></script>
    <script src="http://projects.scpr.org/static/static-files/scripts/moment.min.js"></script>
    <script src="{{ static_url('metropolitan-water-district-rental-properties', '/js/maps_lib.js') }}"></script>
    <script src="{{ static_url('metropolitan-water-district-rental-properties', '/js/data-script.js') }}"></script>
{% endblock %}

{% block kpcc_analytics %}
    {% if project_analytics == 'True' %}
        <!-- begin google analytics -->
        <script type="text/javascript">
            var currentPath = window.location.pathname;

            var pageType = _.find(scpr.GA_PAGE_MAPPING, function(v, k) {
                return currentPath.match(new RegExp(k)) !== null;
            });

            var _gaq = _gaq || [];
            _gaq.push(
                ['_setAccount', 'UA-624724-1'],
                ['_setDomainName', 'scpr.org'],
                ['_setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['_setCustomVar', 7, 'PageType', 'Story', 3],
                ['_trackPageview'],
                ['b._setAccount', 'UA-18188937-11'],
                ['b._setDomainName', 'scpr.org'],
                ['b._setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['b._setCustomVar', 7, 'PageType', 'Story', 3],
                ['b._trackPageview']
            );
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
        <!-- end google analytics -->

        <!-- begin chartbeat analytics -->
        <script type="text/javascript">
            var _sf_async_config = { uid: 33583, domain: 'scpr.org', useCanonical:true };
            (function() {
                function loadChartbeat() {
                    window._sf_endpt = (new Date()).getTime();
                    var e = document.createElement('script');
                    e.setAttribute('language', 'javascript');
                    e.setAttribute('type', 'text/javascript');
                    e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
                    document.body.appendChild(e);
                };
                var oldonload = window.onload;
                window.onload = (typeof window.onload != 'function') ? loadChartbeat : function() { oldonload(); loadChartbeat(); };
            })();
        </script>
        <!-- end chartbeat analytics -->    {% else %}

    {% endif %}
{% endblock %}